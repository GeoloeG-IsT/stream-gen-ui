---
plan: 01-01
title: Move frontend to self-contained frontend/ directory
wave: 1
depends_on: []
files_modified:
  - frontend/app/**/*
  - frontend/components/**/*
  - frontend/contexts/**/*
  - frontend/lib/**/*
  - frontend/types/**/*
  - frontend/public/**/*
  - frontend/vitest.setup.ts
  - frontend/next-env.d.ts
  - frontend/package.json
  - frontend/package-lock.json
  - frontend/tsconfig.json
  - frontend/next.config.ts
  - frontend/vitest.config.ts
  - frontend/eslint.config.mjs
  - frontend/postcss.config.mjs
  - frontend/.npmrc
  - .gitignore
  - .planning/codebase/STRUCTURE.md
  - .planning/codebase/ARCHITECTURE.md
  - .planning/codebase/CONVENTIONS.md
  - .planning/codebase/TESTING.md
  - .planning/codebase/STACK.md
autonomous: true
---

# Move Frontend to Self-Contained frontend/ Directory

## Objective

Reorganize the codebase so the frontend is a fully self-contained Next.js project inside `frontend/`, with its own package.json, configuration files, and node_modules. This creates a proper monorepo structure where both frontend and backend are independent packages.

**Purpose:** Enable clean frontend/backend separation where each is self-contained with its own dependencies and configuration.

**Output:** Working Next.js project inside frontend/ that can be built and run with `cd frontend && npm run build`.

## must_haves

**truths:**
- All Next.js source files and configuration exist under frontend/ directory
- Frontend builds successfully from frontend/ directory (`cd frontend && npm run build`)
- Frontend development server runs from frontend/ directory
- Frontend has its own package.json, node_modules, and all configuration files
- All tests pass when run from frontend/ directory
- Only .gitignore remains at repository root (besides .planning/ and .claude/)

**artifacts:**
- path: "frontend/app/page.tsx"
  provides: "Root page redirect"
- path: "frontend/package.json"
  provides: "Frontend dependencies and scripts"
- path: "frontend/tsconfig.json"
  provides: "TypeScript configuration"
- path: "frontend/next.config.ts"
  provides: "Next.js configuration"
- path: "frontend/vitest.config.ts"
  provides: "Test configuration"

**key_links:**
- from: "frontend/tsconfig.json"
  to: "frontend/*"
  via: "paths[\"@/*\"]"
  pattern: "\"@/\\*\": \\[\"\\.\\*\"\\]"
  note: "Paths stay as ./* since tsconfig is now inside frontend/"
- from: "frontend/vitest.config.ts"
  to: "frontend/vitest.setup.ts"
  via: "setupFiles"
  pattern: "./vitest.setup.ts"
  note: "Relative path since config is inside frontend/"

## Context

@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-frontend-reorganization/01-RESEARCH.md

## Important: Self-Contained Frontend Package

Unlike a shared-root monorepo, this approach makes frontend/ a completely independent package:
- Has its own package.json with all dependencies
- Has its own node_modules/
- Has its own tsconfig.json, next.config.ts, etc.
- Can be built/run independently: `cd frontend && npm install && npm run build`

This mirrors how the backend/ will be structured (self-contained Python project with its own requirements.txt).

## Tasks

<task id="1">
<title>Create frontend/ directory and move all frontend files</title>
<instruction>
Create the frontend/ directory and move ALL frontend-related files (both source code AND configuration):

1. Create frontend directory:
```bash
mkdir frontend
```

2. Move all application directories:
```bash
mv app frontend/
mv components frontend/
mv contexts frontend/
mv lib frontend/
mv types frontend/
mv public frontend/
mv vitest.setup.ts frontend/
mv next-env.d.ts frontend/
```

3. Move all configuration files:
```bash
mv package.json frontend/
mv package-lock.json frontend/
mv tsconfig.json frontend/
mv next.config.ts frontend/
mv vitest.config.ts frontend/
mv eslint.config.mjs frontend/
mv postcss.config.mjs frontend/
mv .npmrc frontend/
mv node_modules frontend/
```

**Note on `mv` behavior:** Each `mv` command moves the ENTIRE directory/file with ALL its contents.

Files being moved:
- app/ - Next.js App Router pages and API routes (including globals.css, favicon.ico)
- components/ - React components
- contexts/ - React contexts
- lib/ - Utilities
- types/ - TypeScript types
- public/ - Static assets
- vitest.setup.ts - Test setup file
- next-env.d.ts - Next.js TypeScript declarations
- package.json - Dependencies and scripts
- package-lock.json - Locked dependency versions
- tsconfig.json - TypeScript configuration
- next.config.ts - Next.js configuration
- vitest.config.ts - Test configuration
- eslint.config.mjs - ESLint configuration
- postcss.config.mjs - PostCSS/Tailwind configuration
- .npmrc - npm configuration
- node_modules/ - Installed dependencies

Do NOT move:
- .gitignore (stays at root - applies to entire repo)
- .planning/ (project planning - stays at root)
- .claude/ (Claude configuration - stays at root)
</instruction>
<verification>
Run: `ls -la frontend/` - Should show app/, components/, contexts/, lib/, types/, public/, node_modules/, and all config files
Run: `ls frontend/app/` - Should show globals.css, favicon.ico, page.tsx, layout.tsx, and subdirectories
Run: `ls package.json 2>/dev/null || echo "package.json moved successfully"` - Should confirm config files no longer exist at root
Run: `ls frontend/package.json` - Should confirm package.json is in frontend/
</verification>
</task>

<task id="2">
<title>Update .gitignore for monorepo structure</title>
<instruction>
Update the root .gitignore to handle the new monorepo structure where frontend/ is self-contained.

The patterns need to apply to frontend/ subdirectory. Update patterns:

```gitignore
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
node_modules
.pnp
.pnp.*
.yarn/*
!.yarn/patches
!.yarn/plugins
!.yarn/releases
!.yarn/versions

# testing
coverage

# next.js
.next/
out/

# production
build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.pnpm-debug.log*

# env files (can opt-in for committing if needed)
.env*

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts

# bmad
_bmad/
_bmad-output/

# GSD codebase intelligence (auto-generated, local only)
.planning/intel/

# Python (for future backend)
__pycache__/
*.py[cod]
*$py.class
.Python
venv/
.venv/
```

Key changes:
- Remove leading slashes (/) to make patterns apply recursively to subdirectories
- Add Python patterns for future backend
- Keep patterns generic so they work for both frontend/ and future backend/
</instruction>
<verification>
Run: `cat .gitignore | grep -E "^node_modules$"` - Should show pattern without leading slash
Run: `cd frontend && git status` - Should show node_modules and .next are ignored
</verification>
</task>

<task id="3">
<title>Verify frontend builds and runs from frontend/ directory</title>
<instruction>
Run full verification that the frontend works as a self-contained package:

1. Navigate to frontend directory:
```bash
cd frontend
```

2. Clean any stale build artifacts:
```bash
rm -rf .next
```

3. Verify dependencies are intact (node_modules moved correctly):
```bash
npm ls next 2>/dev/null && echo "Dependencies OK" || npm install
```

4. Run production build:
```bash
npm run build
```
Expected: Build completes successfully with exit code 0

5. Run TypeScript check:
```bash
npx tsc --noEmit
```
Expected: Completes with exit code 0

6. Run tests:
```bash
npm test
```
Expected: All 16 test files pass

7. Run linter:
```bash
npm run lint
```
Expected: Completes without errors

The primary verification gate is `npm run build` succeeding from within frontend/. This confirms:
- Next.js finds app/ directory (now at frontend/app/ but relative to frontend/)
- All imports resolve correctly with @/* alias
- All configuration files work from their new location
</instruction>
<verification>
Run from frontend/: `npm run build` - Must exit 0 with "Compiled successfully" message
Run from frontend/: `npm test` - All 16 test files must pass
Run from frontend/: `npx tsc --noEmit` - Must exit 0 with no errors
Run from frontend/: `npm run lint` - Must exit 0
</verification>
</task>

<task id="4">
<title>Update documentation paths in .planning/codebase/*.md</title>
<instruction>
Update all path references in codebase documentation to reflect the new self-contained frontend/ structure.

Files to update:
1. .planning/codebase/STRUCTURE.md - Update directory layout diagram and all path references
2. .planning/codebase/ARCHITECTURE.md - Update layer locations and entry point paths
3. .planning/codebase/CONVENTIONS.md - Update path alias documentation and working directory notes
4. .planning/codebase/TESTING.md - Update test file location examples and run commands
5. .planning/codebase/STACK.md - Update configuration file locations

Key changes in each file:

**STRUCTURE.md:**
- Update directory layout to show frontend/ as a self-contained package
- Show that package.json, tsconfig.json, etc. are INSIDE frontend/
- Change all "app/" references to "frontend/app/"
- Change all "components/" references to "frontend/components/"
- Note that commands run from frontend/: `cd frontend && npm run build`

**ARCHITECTURE.md:**
- Update all layer Location fields to include "frontend/" prefix
- Update Entry Points section paths
- Note that the frontend is a self-contained package

**CONVENTIONS.md:**
- Update "Path Aliases" section: "@/*" maps to "./*" (relative to frontend/)
- Add note about working directory: commands run from frontend/
- Update example imports

**TESTING.md:**
- Update test file location examples to include "frontend/" prefix
- Update run commands: `cd frontend && npm test`
- Update setup file reference to "frontend/vitest.setup.ts"

**STACK.md:**
- Update "Build" configuration section to note all configs are in frontend/
- Note that frontend is self-contained with its own node_modules
- Update all config file paths to frontend/*
</instruction>
<verification>
Run: `grep -r "app/" .planning/codebase/*.md | grep -v "frontend/app" | grep -v "App Router"` - Should return empty (all app/ references updated to frontend/app/)
Verify: Each .planning/codebase/*.md file mentions that frontend/ is self-contained
Verify: Run commands in docs reference `cd frontend &&` prefix
</verification>
</task>

## Verification Criteria

1. **Structure:** `ls frontend/` shows app/, components/, node_modules/, package.json, tsconfig.json, and all other files
2. **Build:** `cd frontend && npm run build` completes with exit code 0
3. **Tests:** `cd frontend && npm test` passes all 16 test files
4. **Lint:** `cd frontend && npm run lint` completes without errors
5. **TypeScript:** `cd frontend && npx tsc --noEmit` completes with exit code 0
6. **Root clean:** `ls package.json 2>/dev/null` returns error (no package.json at root)
7. **Documentation:** All .planning/codebase/*.md files reference frontend/ as self-contained

## Success Criteria

- Frontend is fully self-contained in frontend/ directory
- Frontend has its own package.json, node_modules, and all configuration
- Frontend builds successfully from frontend/ directory
- All tests pass when run from frontend/ directory
- Only .gitignore remains at repository root (besides .planning/ and .claude/)
- Documentation reflects the self-contained structure
